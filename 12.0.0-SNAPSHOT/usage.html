<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Jul 15, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130715" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Oracle Coherence Spring Integration - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script src="js/site.js" type="text/javascript"></script>
                      
        
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-39051314-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
          
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/coherence-community/coherence-spring-integration/">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Coherence Spring Site</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2013-07-15</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 12.0.0-SNAPSHOT</li>
                      
                
            
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                <ul class="nav nav-list">
                            
      <li>
    
                          <a href="index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Usage</a>
          </li>
                  
      <li>
    
                          <a href="source-code.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="building.html" title="Building">
          <i class="none"></i>
        Building</a>
            </li>
                  
      <li>
    
                          <a href="forums.html" title="Getting Help">
          <i class="none"></i>
        Getting Help</a>
            </li>
                  
      <li>
    
                          <a href="issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                  
      <li>
    
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                  
      <li>
    
                          <a href="contributions.html" title="Contributions">
          <i class="none"></i>
        Contributions</a>
            </li>
            </ul>
                
            
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h2>Oracle Coherence Spring Integration Usage</h2>

<p>The Coherence cache configuration file <code>coherence-cache-config.xml</code> provides
the <code>class-scheme element</code>, where you can specify your own implementations
of Coherence interfaces, such as <code>CacheStore</code> and <code>MapListener</code>. Coherence can
instantiate your implementations in either of two ways:</p>

<ul>
<li>it can create a new instance by using the new operator</li>
<li>it can invoke a user-provided factory method</li>
</ul>

<p>For some applications, it may be useful for Coherence to retrieve objects
configured in a <code>class-scheme</code> element or <code>instance</code> element from a Spring
<code>BeanFactory</code> instance instead of creating its own instance. This is especially
true for cache servers configured with <code>CacheStore</code> objects running in a
standalone JVM, because these <code>CacheStore</code> objects typically must be configured
with data sources, connection pools, and so on. Spring provides easy
configuration of data sources for plain Java objects.</p>

<h2>The Spring Namespace Handler</h2>

<p>The Coherence Spring namespace handler <code>com.oracle.coherence.spring.SpringNamespaceHandler</code>
allows you to reference Spring beans in a cache configuration file. The
references are made declaratively in XML files. The schema definitions
for the Coherence Spring namespace handler configuration elements are
described in the <code>coherence-spring-config.xsd</code> file. You can find this file
in the <code>coherence-spring.jar</code> file.</p>

<p><strong>Coherence Spring Configuration Elements</strong></p>

<table cellspacing='20'>
  <tr>
    <th width='30%'>Element</th>
    <th width='25%'>Used In</th>
    <th>Description</th>
  </tr>
  <tr>
    <td valign='top'><code>application-context-uri</code></td>
    <td valign='top'><code>bean-factory</code></td>
    <td>Defines a location for a Spring application context XML file.
        If URL notation is used, the file will be loaded as a URL
        (that is, file://, http://); otherwise the file will be
        loaded from the classpath.</td>
  </tr>
  <tr>
    <td valign='top'><code>bean</code></td>
    <td valign='top'><code>class-scheme</code> <code>instance</code></td>
    <td>Defines a Spring bean that will be provided to Coherence.
        Use the property attribute to inject a property into a
        Spring bean.</td>
  </tr>
  <tr>
    <td valign='top'><code>bean-factory</code></td>
    <td valign='top'>Must appear as the first subelement under
       <code>cache-config</code></td>
    <td>Defines a Spring bean factory that will be used to
        provide named beans to Coherence.</td>
  </tr>
  <tr>
    <td valign='top'><code>bean-name</code></td>
    <td valign='top'><code>bean</code></td>
    <td>Identifies the name of a bean to be retrieved from a
        Spring bean factory.</td>
  </tr>
  <tr>
    <td valign='top'><code>factory-name</code></td>
    <td valign='top'><code>bean</code> <code>bean-factory</code></code></td>
    <td>Identifies a Spring bean factory. This name is used to
        refer to a factory when defining a bean definition.</td>
  </tr>
</table>

<h2>Declaring the Spring Namespace Handler</h2>

<p>To use the Coherence Spring namespace handler, you must declare it in a cache
configuration file and then specify a factory for the Spring beans.</p>

<p>Use the following Coherence Spring namespace handler declaration in the
cache configuration file:</p>

<pre><code>xmlns:spring="class://com.oracle.coherence.spring.SpringNamespaceHandler"
</code></pre>

<p>To ensure proper configuration within the cache configuration file, the XSD file
<code>coherence-spring-config.xsd</code> that corresponds with this namespace handler can
also be referenced, as illustrated below:</p>

<pre><code>&lt;cache-config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns="http://xmlns.oracle.com/coherence/coherence-cache-config"
 xmlns:spring="class://com.oracle.coherence.spring.SpringNamespaceHandler"
 xsi:schemaLocation="http://xmlns.oracle.com/coherence/coherence-cache-config
                     coherence-cache-config.xsd
 class://com.oracle.coherence.spring.SpringNamespaceHandler coherence-spring-config.xsd"&gt;
</code></pre>

<p> If your cache configuration must specify an externally provided user class by using a
 <code>class-scheme</code> or <code>instance</code> element, then this namespace handler can provide a
 Spring bean from a <code>BeanFactory</code>. To specify a Spring bean, use the <code>bean</code> and
 <code>bean-name</code> elements under the <code>class-scheme</code> or <code>instance</code> element:</p>

<pre><code>&lt;class-scheme&gt;
  &lt;spring:bean&gt;
    &lt;spring:bean-name&gt;listener&lt;/spring:bean-name&gt;
  &lt;/spring:bean&gt;
&lt;/class-scheme&gt;
</code></pre>

<p>You can also use the property attribute to inject properties (including cache
configuration macros) into a bean, as illustrated below:</p>

<pre><code>&lt;spring:bean&gt;
  &lt;spring:bean-name&gt;listener&lt;/spring:bean-name&gt;
  &lt;spring:property name="backingMapManagerContext"&gt;{manager-context}&lt;/spring:property&gt;
&lt;/spring:bean&gt;
</code></pre>

<h2>Specifying a Factory for Spring Beans</h2>

<p>You can specify the bean factory that provides the Spring beans in either of the following ways:</p>

<ul>
<li>Specify an Application Context in the cache configuration file</li>
<li>Specify a Bean Factory as a resource</li>
</ul>

<p>Use the <code>application-context-uri</code> element to specify the location of the Spring
application context XML file. Like the cache configuration file, the application
context file will be loaded either by using the file system or the classpath.
The <code>application-context-uri</code> element also supports URLs as values.
In the following example, <code>application-context.xml</code> represents the
application context XML file:</p>

<pre><code>&lt;cache-config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns="http://xmlns.oracle.com/coherence/coherence-cache-config"
          xmlns:spring="class://com.oracle.coherence.spring. SpringNamespaceHandler"
          xsi:schemaLocation="http://xmlns.oracle.com/coherence/coherence-cache-config
                              coherence-cache-config.xsd
          class://com.oracle.coherence.spring.SpringNamespaceHandler coherence-spring-config.xsd"&gt;
&lt;spring:bean-factory&gt;
  &lt;spring:application-context-uri&gt;application-context.xml&lt;/spring:application-context-uri&gt;
&lt;/spring:bean-factory&gt;
</code></pre>

<p>Additionally, a Spring bean factory can be manually registered as a resource by
using the <code>registerResource</code> method, as illustrated below. In the example,
<code>DEFAULT_FACTORY_NAME</code> refers to the default Spring BeanFactory class:</p>

<pre><code>ConfigurableCacheFactory factory = CacheFactory.getCacheFactoryBuilder()
        .getConfigurableCacheFactory(...);

factory.getResourceRegistry().registerResource(
        BeanFactory.class,                            // type
        SpringNamespaceHandler.DEFAULT_FACTORY_NAME,  // resource name
        factory,                                      // factory reference
        null);                                        // optional
                                                      // ResourceLifecycleObserver
</code></pre>

<p>If you specify a resource name other than <code>DEFAULT_FACTORY_NAME</code>, then reference
that name in the bean element. Use the <code>factory-name</code> element for the name of
the custom bean factory and <code>bean-name</code> for the name of the bean.
In the example below, the name of the bean factory is "custom-factory" and the
bean name is "listener":</p>

<pre><code>&lt;spring:bean&gt;
   &lt;spring:factory-name&gt;custom-factory&lt;/spring:factory-name&gt;
   &lt;spring:bean-name&gt;listener&lt;/spring:bean-name&gt;
&lt;/spring:bean&gt;
</code></pre>

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2013.
          All Rights Reserved.      
            
      </div>

                                                                  <?xml version="1.0" encoding="UTF-8"?>
<div class="copyright">Copyright © 2008-2013 Oracle Corporation. All rights reserved.</div>
                                                          <?xml version="1.0" encoding="UTF-8"?>
<div class="version">Version 12.0.0-SNAPSHOT: 2013-07-15 13:50</div>
                  
        
                </div>
    </footer>
  </body>
</html>
